---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import { getAllPosts } from "../lib/cosmic";

const data = await getAllPosts();

export interface Post {
  title: string;
  slug: string;
  metadata: {
    excerpt: string;
  };
  created_at: string;
}
---

<Layout>
  <h1 class="text-3xl mb-2">slow heal</h1>
  <p class="text-gray-600">we&apos;re all healing</p>
  <div class="my-6"></div>
  <section class="mt-24">
    <h3 class="text-2xl text-gray-600">blog posts</h3>
    <ul>
      {
        data.map((post: Post) => (
          <Card
            title={post.title}
            href={post.slug}
            body={post.metadata.excerpt}
            date={post.created_at}
          />
        ))
      }
    </ul>
  </section>
</Layout>
